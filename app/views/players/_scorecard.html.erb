<table 
  class="table table-striped table-bordered table-hover ui-datatable player-scorecard"
  data-paging=true
  data-page-length=30
  data-ordering=true
  data-order="[[ 8, &quot;desc&quot; ]]"
  data-length-change=false
  data-info=false
  data-searching=true
>
  <thead>
    <tr>
      <th aria-label="Player">Player</th>
      <th aria-label="Position">Position</th>
      <% @league.point_category_groups.each do |group| %>
        <th><%= group.capitalize %></th>
      <% end %>
      <th aria-label="Total Points">Total Points</th>
    </tr>
  </thead>
  <tbody>
    <% players.each do |player| %>
      <tr>
        <td><%= player.first_name %> <%= player.last_name %></td>
        <td><%= player.playing_as.title %></td>
        <% @league.point_category_groups.each do |group| %>
          <td><%= player.points_for_group(group) %></td>
        <% end %>
        <td><%= player.total_points %></td>
      </tr>
    <% end %>
  </tbody>

  <% if defined?(total_points_on) %>
    <tfoot>
      <tr>
        <td colspan=2 ></td>
        <% @league.point_category_groups.each do |group| %>
          <td><%= total_points_on.points_for_group(group) %></td>
        <% end %>
        <td><%= total_points_on.total_points %></td>
      </tr>
    </tfoot>
  <% end %>
</table>
