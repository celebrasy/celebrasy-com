<div class="portlet portlet-default">
  <% if @team.errors.any? %>
    <div id="error_explanation">
      <ul>
      <% @team.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="portlet-header">
    <h4 class="portlet-title">
      Roster
    </h4>
  </div>

  <%= form_for([@league, @team]) do |f| %>
    <table 
      class="table table-striped table-bordered table-hover ui-datatable" 
      data-paging=false
      data-ordering=true
      data-length-change=false
      data-info=false
      data-searching=false
    >
      <thead>
        <tr role="row">
          <th aria-label="Player">Player</th>
          <th aria-label="Position">Position</th>
        </tr>
      </thead>
      <tbody>

        <% @team.roster_slots.each do |roster_slot| %>
          <tr role="row" class="odd roster-slot-<%= roster_slot.id %>">
            <td><%= roster_slot.league_player.first_name %> <%=roster_slot.league_player.last_name %></td>
            <td>
              <%= hidden_field "team[roster_slots][#{roster_slot.id}]", "league_player_id", { value: roster_slot.league_player.id } %>
              <%= collection_select "team[roster_slots][#{roster_slot.id}]", 'league_position_id', roster_slot.league_player.allowed_league_positions, :id, :title, { selected: roster_slot.league_position_id } %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <div class="pull-right">
      <%= link_to 'Cancel', league_team_path(@league, @team), class: "btn btn-default" %>
      <%= f.submit class: "btn btn-primary" %>
    </div>
  <% end %>
</div>
